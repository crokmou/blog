"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var GTAG=function(){function e(){window.gtag("config",window.CROKMOU_CONF_KEY_GA)}function t(e){var t=e.category,n=void 0===t?"":t,r=e.type,o=void 0===r?"":r,i=e.action,a=void 0===i?"":i,c=e.label,s=void 0===c?"":c;(window.gtag||"function"==typeof window.gtag)&&window.gtag("event",o,{event_category:n,event_action:a,event_label:s})}return function t(){var n=document.createElement("script");n.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+window.CROKMOU_CONF_KEY_GA),document.head.appendChild(n),window.dataLayer=window.dataLayer||[],window.gtag=function e(){window.dataLayer.push(arguments)},window.gtag("js",new Date),e()}(),{sendPageView:e,sendEvent:t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$(document).ready(function(){function e(){try{var e=algoliasearch(window.CROKMOU_CONF_ALGOLIA_ID,window.CROKMOU_CONF_ALGOLIA_API_KEY),t=e.initIndex("blog");$("#search-input").autocomplete({openOnFocus:!0,templates:{dropdownMenu:"#global-search"}},[{source:$.fn.autocomplete.sources.hits(t,{hitsPerPage:5}),templates:{suggestion:function e(t){var n=t._highlightResult;return'<div class="global-search__content">\n                        <h2 class="global-search__content__title">'+n.title.value+'</h2>\n                        <p class="global-search__content__desc">\n                          '+n.section.value+" > "+n.categories.map(function(e){return e.value}).join("-")+"</p>\n                      </div>"}}}]).on("autocomplete:selected",function(e,t,n){window.location=t.uri})}catch(e){setTimeout(Algolia,300)}}function t(){$(window).off("resize"),$(window).off("scroll")}function n(){function e(e){var t=[],n=0;return new Promise(function(r){for(var o=function o(i){var a=$(e[i]),c=a.find('[itemprop="contentUrl"]'),s=c.attr("href"),u=c.find("img")[0];if(!u)return n++,n===e.length&&r(t),{v:void 0};u.onload=function(){n++,t.push(u),n===e.length&&r(t)},u.onerror=function(){n++,t.push({error:""}),n===e.length&&r(t)},u.src=s},i=0;i<e.length;i++){var a=o(i);if("object"===(void 0===a?"undefined":_typeof(a)))return a.v}})}!function t(n){for(var r=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var r,o,i,a,c,s,u;return regeneratorRuntime.wrap(function t(l){for(;;)switch(l.prev=l.next){case 0:return r=n.querySelectorAll("figure"),o=[],i=void 0,a=void 0,c=void 0,l.next=7,e(r);case 7:s=l.sent,u=0;case 9:if(!(u<s.length)){l.next=21;break}if(i=r[u],a=s[u],1===i.nodeType&&!a.error){l.next=14;break}return l.abrupt("continue",18);case 14:c={src:a.src,w:parseInt(a.naturalWidth||a.width,10),h:parseInt(a.naturalHeight||a.height,10)},i.children.length>1&&(c.title=i.children[1].innerHTML),c.el=i,o.push(c);case 18:u++,l.next=9;break;case 21:return l.abrupt("return",o);case 22:case"end":return l.stop()}},t,this)}));return function e(n){return t.apply(this,arguments)}}(),o=function e(t,n){return t&&(n(t)?t:e(t.parentNode,n))},i=function e(t){t=t||window.event;var n=t.target||t.srcElement,r=o(n,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){t.preventDefault?t.preventDefault():t.returnValue=!1;for(var i=o(n,function(e){return e.classList.contains("single")}),a=i.querySelectorAll("figure"),s=a.length,u=0,l=void 0,f=0;f<s;f++)if(1===a[f].nodeType){if(a[f]===r){l=u;break}u++}return l>=0&&c(l,i),!1}},a=function e(){var t=window.location.hash.substring(1),n={};if(t.length<5)return n;for(var r=t.split("&"),o=0;o<r.length;o++)if(r[o]){var i=r[o].split("=");i.length<2||(n[i[0]]=i[1])}return n.gid&&(n.gid=parseInt(n.gid,10)),n},c=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n,o,i){var a,c,s,u,l,f;return regeneratorRuntime.wrap(function e(d){for(;;)switch(d.prev=d.next){case 0:return a=document.querySelectorAll(".pswp")[0],c=$("[rel=js-loading-pswp]"),s=void 0,u=void 0,l=void 0,c.addClass("footer__loading-pswp--active"),d.next=8,r(n);case 8:if(l=d.sent,c.removeClass("footer__loading-pswp--active"),u={showHideOpacity:!0,galleryUID:n.getAttribute("data-pswp-uid")||1,shareButtons:[{id:"facebook",label:"Partager sur Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Partager sur Tweeter",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Partager sur Pinterest",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"}],getThumbBoundsFn:function e(t){var n=l[t].el.getElementsByTagName("img")[0],r=window.pageYOffset||document.documentElement.scrollTop,o=n.getBoundingClientRect();return{x:o.left,y:o.top+r,w:o.width}}},!i){d.next=26;break}if(!u.galleryPIDs){d.next=23;break}f=0;case 14:if(!(f<l.length)){d.next=21;break}if(l[f].pid!=t){d.next=18;break}return u.index=f,d.abrupt("break",21);case 18:f++,d.next=14;break;case 21:d.next=24;break;case 23:u.index=parseInt(t,10)-1;case 24:d.next=27;break;case 26:u.index=parseInt(t,10);case 27:if(!isNaN(u.index)){d.next=29;break}return d.abrupt("return");case 29:o&&(u.showAnimationDuration=0),s=new PhotoSwipe(a,PhotoSwipeUI_Default,l,u),s.init();case 32:case"end":return d.stop()}},e,this)}));return function t(n,r,o,i){return e.apply(this,arguments)}}(),s=document.querySelectorAll(n),u=0,l=s.length;u<l;u++)s[u].setAttribute("data-pswp-uid",u+1),s[u].onclick=i;var f=a();f.pid&&f.gid&&c(f.pid,s[f.gid-1],!0,!0)}(".single")}var r=$("#page-container"),o=$("body, html"),i=function t(){function r(){function e(e){var r=t.width()>=768,o=t.scrollTop()>=60;n.css({transition:e?".3s ease transform":"none",transform:"translateY("+(o&&r?"30":"0")+"px) scale("+(o&&r?".6":"1")+")"})}var t=$(window),n=$('[rel*="logo"]'),r=$('[rel="nav"]'),o=r.find(".active");if(o.length){var i=o.offset().left-r.offset().left-40;r.scrollLeft(i)}c(function(){e(),s(function(){e(!0)})})}function i(){var e=$('[rel="single-header-title"]'),t=e.children(),n=0;t.each(function(){var e=$(this),t=e.height();t>n&&(n=t)}),t.height("100%"),e.height(Math.max(n+30,110))}function a(){var e=$('iframe[src*="youtube.com"], iframe[src*="facebook.com"]');e.each(function(){$(this).data("aspectRatio",(this.height||16)/(this.width||10)).removeAttr("height").removeAttr("width")}),c(function(){e.each(function(){var e=$(this),t=e.parent(),n=t.width();e.width(n).height(n*e.data("aspectRatio"))})})}function c(e){setTimeout(function(){return $(window).resize(e).resize()},100)}function s(e){$(window).scroll(e).scroll()}function u(){var e=0;!function t(){try{window.parsePinBtns()}catch(n){e++,e<500&&setTimeout(t,100)}}()}function l(){var e=$('[rel="js-return-top"]');s(function(){o.scrollTop()>=500?e.fadeIn():e.fadeOut()}),e.on("click",function(){o.scrollTop(0)})}return r(),e(),n(),i(),a(),l(),{init:t,update:function e(){t(),u()}}}();!function e(){function n(n){$.get(n,function(n){$.each($(n),function(n,a){var c=$(this),s="";r[0].id===a.id&&("TITLE"===c[0].nodeName.toUpperCase()&&(s=$("head title").html(c.html())),r.html($(a).html()).promise().done(function(n){$(window).scrollTop()>=$('[rel="header"]').height()&&o.scrollTop($('[rel="header"] + *').offset().top-60),t(),i.update(),e(),GTAG.sendPageView()}))})})}history&&history.pushState&&($('[rel*="xhr"], .pagination a').click(function(e){var t=$(this).attr("href");try{n(t),history.pushState("","New URL: "+t,t),e.preventDefault()}catch(e){return location.href=t,!0}}),window.onpopstate=function(){return n(location.pathname)})}(),function e(){"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js?v=3").then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":navigator.serviceWorker.controller;break;case"redundant":console.error("The installing service worker became redundant.");break}}}}).catch(function(e){console.error("Error during service worker registration:",e)})}(),function e(){function t(e,t){var n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&n.setAttribute("media",t),n.type="text/css",$("head").append($(n))}t("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css","screen, projection"),t("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css","screen, projection"),t("https://fonts.googleapis.com/css?family=Oswald:300|Roboto:300,400,500"),t("/assets/print.css?v=1","print")}()});